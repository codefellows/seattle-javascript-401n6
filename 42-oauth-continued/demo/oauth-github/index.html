<!DOCTYPE html>
<html>
  <head>
    <title>OAuth Login</title>
  </head>
  <body>
    <h1>GitHub OAUTH Demo:</h1>
    <div>
      <a id="authorize"></a>
    </div>
    <div>
      <a id="review"></a>
    </div>

    <script>
      let a = document.getElementById('authorize');
      let AUTH_URL = 'https://github.com/login/oauth/authorize';
      let urlParams = { 
        client_id: 'f0d91ea8c6c281a3dc9f',
        redirect_uri: 'http://localhost:3000/oauth-callback',
        state: '' + Math.random(),
      };
      let formattedURL = AUTH_URL + '?';
      for (let key in urlParams) {
        formattedURL += '&' + key + '=' + urlParams[key];
      }                 

      a.setAttribute('href', formattedURL);
      a.textContent = 'login with GitHub';
      console.log('the URL we built:', formattedURL);

      let clientId = 'f0d91ea8c6c281a3dc9f';
      let reviewUrl = 'https://github.com/settings/connections/applications/' + clientId;
      let reviewLink = document.getElementById('review');
      reviewLink.setAttribute('href', reviewUrl);
      reviewLink.textContent = 'review permissions';
    </script>
  </body>
</html>

